@{
    ViewData["Title"] = "Wallet Payment - FoodSathi";
}

<div class="container my-5 d-flex justify-content-center align-items-center">
    <div class="card shadow-lg border-0 rounded-4 p-4 p-md-5 text-center" style="max-width: 600px; width: 100%; background-color: #fff;">

        <!-- Header -->
        <div class="mb-4">
            <div class="rounded-circle bg-success bg-opacity-10 d-inline-flex justify-content-center align-items-center" style="width: 75px; height: 75px;">
                <i class="bi bi-wallet2 text-success fs-2"></i>
            </div>
            <h3 class="fw-bold text-success mt-3 mb-2">Digital Wallet Payment</h3>
            <p class="text-muted mb-0">Pay quickly and securely using your preferred wallet.</p>
        </div>

        <!-- Payment Buttons -->
        <div class="d-flex flex-column flex-md-row justify-content-center align-items-center gap-3 mt-4">
            <a href="https://esewa.com.np/#/home" target="_blank" class="btn btn-success btn-lg px-4 shadow-sm d-flex align-items-center justify-content-center">
                <i class="bi bi-cash-coin me-2"></i> Pay with eSewa
            </a>
            <a href="https://khalti.com/" target="_blank" class="btn btn-primary btn-lg px-4 shadow-sm d-flex align-items-center justify-content-center">
                <i class="bi bi-credit-card me-2"></i> Pay with Khalti
            </a>
        </div>

        <!-- Footer Info -->
        <div class="mt-4">
            <p class="small text-muted">
                After completing your payment, please return to <span class="fw-semibold text-success">FoodSathi</span> to confirm your order.
            </p>
            <a href="/Checkout/Confirm" class="btn btn-outline-success mt-2 px-4">
                <i class="bi bi-check-circle me-1"></i> Confirm Payment
            </a>
        </div>

        <hr class="my-4">
        <!-- Payment Support Section -->
        <div class="text-center">
            <h5 class="fw-bold text-success mb-2"><i class="bi bi-headset me-2"></i> Payment Support</h5>
            <p class="text-muted small mb-4">Having trouble with your payment? Let us help you.</p>

            <div class="d-flex flex-column flex-md-row justify-content-center gap-3">
                <a href="mailto:support@foodsathi.com.np?subject=Payment%20Support%20-%20FoodSathi"
                   class="btn btn-outline-primary shadow-sm px-4">
                    <i class="bi bi-envelope-paper me-2"></i> Send Email
                </a>
                <button class="btn btn-outline-warning shadow-sm px-4" data-bs-toggle="modal" data-bs-target="#supportModal">
                    <i class="bi bi-bell me-2"></i> Notify Admin
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Support Modal -->
<div class="modal fade" id="supportModal" tabindex="-1" aria-labelledby="supportModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg rounded-4">
            <div class="modal-header bg-success text-white rounded-top-4">
                <h5 class="modal-title fw-semibold" id="supportModalLabel">
                    <i class="bi bi-headset me-2"></i>Payment Support Request
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body text-start p-4">
                <form id="supportForm">
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Your Name</label>
                        <input type="text" class="form-control" placeholder="Enter your name" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Order ID</label>
                        <input type="text" class="form-control" placeholder="Enter your order ID" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Describe the issue</label>
                        <textarea class="form-control" rows="3" placeholder="Example: Payment deducted but order not confirmed..." required></textarea>
                    </div>
                </form>
            </div>

            <div class="modal-footer border-0 pb-4">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" id="sendSupport" class="btn btn-success px-4">
                    <i class="bi bi-send me-1"></i> Send Request
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Script for Modal Interaction -->
<script>
    document.getElementById("sendSupport").addEventListener("click", function () {
        const btn = this;
        btn.innerHTML = "⏳ Sending...";
        btn.disabled = true;

        setTimeout(() => {
            btn.innerHTML = "✅ Request Sent";
            btn.classList.replace("btn-success", "btn-outline-success");

            // Close modal automatically
            setTimeout(() => {
                const modal = bootstrap.Modal.getInstance(document.getElementById("supportModal"));
                modal.hide();
                btn.innerHTML = '<i class="bi bi-send me-1"></i> Send Request';
                btn.disabled = false;
                btn.classList.replace("btn-outline-success", "btn-success");
            }, 1500);
        }, 1200);
    });
</script>
